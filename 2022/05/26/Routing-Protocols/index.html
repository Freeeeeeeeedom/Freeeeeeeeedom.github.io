<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Routing Protocols | 投降输一半</title><meta name="keywords" content="计算机网络,互联网计算"><meta name="author" content="胡小小小小睿"><meta name="copyright" content="胡小小小小睿"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Routing Protocols （RIP and OSPF） RIP v1 &#x2F; RIP v2 RIP v1  RIP v1被认为是一种内部网关协议  RIP v1是一种距离向量协议，它以预定间隔将其整个路由表广播到每个邻居路由器，默认间隔为30s RIP使用跳数作为度量标准，最大跳数为15，达到16跳的报文自动抛弃  RIP v1能够在多达六个等价路径上进行 负载平衡（Loa"><meta property="og:type" content="article"><meta property="og:title" content="Routing Protocols"><meta property="og:url" content="http://little-hurui.cloud/2022/05/26/Routing-Protocols/index.html"><meta property="og:site_name" content="投降输一半"><meta property="og:description" content="Routing Protocols （RIP and OSPF） RIP v1 &#x2F; RIP v2 RIP v1  RIP v1被认为是一种内部网关协议  RIP v1是一种距离向量协议，它以预定间隔将其整个路由表广播到每个邻居路由器，默认间隔为30s RIP使用跳数作为度量标准，最大跳数为15，达到16跳的报文自动抛弃  RIP v1能够在多达六个等价路径上进行 负载平衡（Loa"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s2.loli.net/2022/04/21/SfQaUZ5L1RmEr3M.jpg"><meta property="article:published_time" content="2022-05-26T15:59:22.000Z"><meta property="article:modified_time" content="2022-06-02T15:01:44.896Z"><meta property="article:author" content="胡小小小小睿"><meta property="article:tag" content="计算机网络"><meta property="article:tag" content="互联网计算"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/04/21/SfQaUZ5L1RmEr3M.jpg"><link rel="shortcut icon" href="https://s2.loli.net/2022/04/19/olzB7QMiuGqbjHe.jpg"><link rel="canonical" href="http://little-hurui.cloud/2022/05/26/Routing-Protocols/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Routing Protocols",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-06-02 23:01:44"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0!==o){const a=new Date;o=864e5*o,t={value:t,expiry:a.getTime()+o};localStorage.setItem(e,JSON.stringify(t))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const o=new Date;if(!(o.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 6.1.0"><style>mjx-container[jax=SVG]{direction:ltr}mjx-container[jax=SVG]>svg{overflow:visible}mjx-container[jax=SVG][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=SVG][justify=left]{text-align:left}mjx-container[jax=SVG][justify=right]{text-align:right}g[data-mml-node=merror]>g{fill:red;stroke:red}g[data-mml-node=merror]>rect[data-background]{fill:#ff0;stroke:none}g[data-mml-node=mtable]>line[data-line]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>rect[data-frame]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>.mjx-dashed{stroke-dasharray:140}g[data-mml-node=mtable]>.mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}g[data-mml-node=mtable]>svg{overflow:visible}[jax=SVG] mjx-tool{display:inline-block;position:relative;width:0;height:0}[jax=SVG] mjx-tool>mjx-tip{position:absolute;top:0;left:0}mjx-tool>mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#f8f8f8;color:#000;box-shadow:2px 2px 5px #aaa}g[data-mml-node=maction][data-toggle]{cursor:pointer}mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#f8f8f8;color:#000}foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}.MathJax path{stroke-width:3}mjx-container[display=true]{overflow:auto hidden}mjx-container[display=true]+br{display:none}</style><link rel="alternate" href="/atom.xml" title="投降输一半" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/04/20/iVOmaCTznfybv2A.jpg" onerror='onerror=null,src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="avatar"></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">148</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">88</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/notes/"><i class="fa-fw fa fa-bold"></i><span> 随笔</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://s2.loli.net/2022/04/21/SfQaUZ5L1RmEr3M.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">投降输一半</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/notes/"><i class="fa-fw fa fa-bold"></i><span> 随笔</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Routing Protocols</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-26T15:59:22.000Z" title="发表于 2022-05-26 23:59:22">2022-05-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-02T15:01:44.896Z" title="更新于 2022-06-02 23:01:44">2022-06-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/">互联网计算</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Routing Protocols"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2022/05/26/Routing-Protocols/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2022/05/26/Routing-Protocols/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="routing-protocols-rip-and-ospf">Routing Protocols （RIP and OSPF）</h1><h1 id="rip-v1-rip-v2">RIP v1 / RIP v2</h1><h2 id="rip-v1">RIP v1</h2><ol type="1"><li>RIP v1被认为是一种<strong>内部网关</strong>协议<ol type="1"><li>RIP v1是一种距离向量协议，它以预定间隔将其整个路由表广播到每个邻居路由器，默认间隔为<strong>30s</strong></li><li>RIP使用<strong>跳数</strong>作为度量标准，最大跳数为15，达到16跳的报文自动抛弃</li></ol></li><li>RIP v1能够在多达六个等价路径上进行 <strong>负载平衡（Load Balancing）</strong>，默认情况下为四个路径，最多六个，跳数才能负载均衡，跳数不同不满足条件</li><li>RIP 最初是在RFC 1058中指定的</li><li>RIP v1具有以下限制<ol type="1"><li>它不会在其更新中发送子网掩码信息:意味着必须用同样的子网掩码，不支持VLSM或无类域间路由(CIDR，Classless Interdomain Routing)。</li><li>它以255.255.255.255的广播形式发送更新:只能发给邻居，<strong>不能通过路由器转发。</strong></li><li>它不支持身份验证(authentication):只要启动RIP就可以接受到信息，也就意味着只要接入网络并且启动RIP进程，就可以了解到整个网络拓扑</li></ol></li></ol><h2 id="rip配置">RIP配置</h2><ol type="1"><li><code>router rip</code>命令选择RIP作为路由协议。</li><li>network 命令分配基于NIC的网络地址，路由器将直接连接到该网络地址。</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/1.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router rip # 选择RIP路由协议</span><br><span class="line">network 1.0.0.0</span><br><span class="line">network 2.0.0.0</span><br><span class="line">凡是属于上面的网段的端口都运行RIP协议</span><br></pre></td></tr></table></figure><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/2.png"></p><blockquote><p>上图中，A启动RIP进程，A有4个端口</p></blockquote><h2 id="rip-v2">RIP v2</h2><ol type="1"><li>RIP v2是RIP v1的<strong>改进</strong>版本，并且<strong>新增</strong>了以下的功能：<ol type="1"><li>这是一种使用<strong>跳数指标</strong>的距离矢量协议。</li><li>它使用<strong>抑制计时器</strong>来防止路由循环-默认值为<strong>180秒</strong>,6倍于交换时间</li><li>它使用水平分割(Split Horizon)来防止路由循环(Routing Loops)。</li><li>它使用16跳作为<strong>无限距离的度量</strong>。(15跳及以内可达)</li></ol></li></ol><h2 id="rip-v2的配置">RIP v2的配置</h2><ol type="1"><li>network命令导致实现以下三个功能：<ol type="1"><li>路由更新从接口多播。</li><li>如果路由更新进入相同的界面，则将对其进行处理。</li><li>广播直接连接到该接口的子网。</li></ol></li><li><code>version 2</code>:表示启动RIP v2，直接使用<code>router rip</code>默认为v1，一定要输入这个命令才能启动RIP v2</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/4.png"></p><h3 id="verifying-troubleshooting-验证与故障排除">Verifying &amp;Troubleshooting 验证与故障排除</h3><ol type="1"><li>验证 RIP v2<ol type="1"><li><code>Router# show ip protocols</code>:Verifying the RIP Configuration 验证RIP配置</li><li><code>Router# show ip route</code>:Displaying the IP Routing Table 显示IP路由表</li></ol></li><li>故障排除 RIP v2<ol type="1"><li><code>Router# debug ip rip</code>:display RIP routing updates sent and received. 显示更新路由表的时候的更新</li><li><code>Router# undebug all (/no debug all)</code>:停止debug</li></ol></li><li>Example</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/5.png"></p><h3 id="debug-ip-rip命令"><code>debug IP RIP</code>命令</h3><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/6.png"></p><ol type="1"><li>The debug ip ripcommand displays RIP routing updates as they are sent and received. In this example, the update is sent by 183.8.128.130. debug ip rip命令显示RIP路由更新的发送和接收。 在本示例中，更新是通过183.8.128.130发送的。</li><li>It reported on three routers, one of which is inaccessible because its hop count is greater than 15. Updates were then broadcast through 183.8.128.2. 它报告了三台路由器，其中一台无法访问，因为其跳数大于15。然后通过183.8.128.2广播了更新。</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/7.png"></p><ol type="1"><li>上图是查看路由表:Codes:表示对于路由协议类型的描述</li><li>120/1：表示1跳到达，120/2：表示2跳到达</li></ol><h2 id="rip-v1-和-rip-v2-的区别">RIP v1 和 RIP v2 的区别</h2><p><img src="https://s2.loli.net/2022/05/30/AMtK4QRUz2GCXjD.png"></p><ol type="1"><li>V2和V1不同的特点:<ol type="1"><li>支持有类路由:可以携带子网掩码</li><li>使用主播地址进行发送广播:特定给RIP接受，避免了接受后发现没有启动RIP进程耽误时间</li><li>需要身份认证才确定是否继续进行接收</li></ol></li></ol><h1 id="ospfsingle-area">OSPF（single area）</h1><h2 id="ospf概述">OSPF概述</h2><ul><li>开放最短路径优先（Open Shortest Path First）是基于标准的链路状态路由协议</li><li>It is described in several standards of the Internet Engineering Task Force (IETF) Internet 网络工程任务组(IETF，Internet Engineering Task Force)的多个标准中对此进行了描述:The most recent description is RFC 2328. 最新的描述是RFC 2328。(已经不是最新的了)</li><li>与RIP v1和RIP v2相比，OSPF正在成为首选的IGP协议，因为它具有可伸缩性。</li><li>和RIP相比优势比较大，很多网络公司在研究OSPF的优化</li></ul><h2 id="路由信息">路由信息</h2><ol type="1"><li>链接的状态是对接口及其与其相邻路由器的关系的描述。</li><li>链接状态的集合形成一个<strong>链接状态数据库</strong>，有时也称为<strong>拓扑数据库</strong>。</li><li>路由器应用<strong>Dijkstra最短路径优先</strong>(SPF)算法来构建以自己为根的SPF树。</li><li>路由器通过SPF树计算最佳路径，然后选择最佳路径并将其放置在<strong>路由表</strong>中</li></ol><h2 id="ospf-vs-rip">OSPF vs RIP</h2><p><img src="https://s2.loli.net/2022/05/30/PyQuSFqtNUGhRED.png"></p><ul><li>OSPF:用于大型网络，基于带宽，可以分层(将网络划分成2层)，收敛更快，支持多路负载均衡</li></ul><p><img src="https://s2.loli.net/2022/05/30/a8l9M5eBFLsNRWu.png"></p><ul><li>上面带宽大，2跳达到，下面带宽小，1跳到达。</li><li>OSPF从上面走，RIP从下面走，但是上面会快一些</li></ul><h2 id="ospf特征">OSPF特征</h2><ul><li><p>OSPF特征</p><ul><li>更健壮</li><li>更具拓展性</li></ul></li><li><p>大型OSPF网络使用分层设计</p><ul><li>将大的网络分成多个area ， 每一个area 只能和area0 相连，保证area 没有回路</li><li>层次最多只有两个，一个area 就是 area0</li><li>层次维持树的关系</li></ul></li></ul><p><img src="https://s2.loli.net/2022/05/30/84gBoSiscMLvFGm.png"></p><h2 id="ospf术语">OSPF术语</h2><p><img src="https://s2.loli.net/2022/05/30/FoYI5iySR9ztVnk.png"></p><blockquote><p>Link : 两个设备之间的物理链路</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/koHtiJOwN9nQ3WM.png"></p><blockquote><p>Neighbors：相邻的路由器</p><p>Link-State（物理链路信息）： 路由器连接关系、通过什么接口、网络类型（点对点，多路复用）等</p><p>不同网络类型处理代价不同</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/8IpbztMKq3olAfi.png"></p><blockquote><p>Cost: 不同网络链路处理的时候的代价和链路带宽成反比，一般是 固定值/带宽</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/udHG7YXTWPjEe6f.png"></p><blockquote><p>Area：一个有很多路由器的端口都属于的区域（相同）</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/P58ISoTrOtLEUK9.png"></p><blockquote><p>Autonomous System：多个Area形成一个自治系统</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/gLMm53QcN2dtxAe.png"></p><p><img src="https://s2.loli.net/2022/05/30/eFcJNIau5g1iknY.png"></p><p><img src="https://s2.loli.net/2022/05/30/ylqXkWmHe9GZgut.png"></p><blockquote><p>Neighbours必须在一个Area中才算是，Neighbour之间交换Topology Databases</p><p>一个Area中获得全部LS(Link State)后计算Tree，生成表</p></blockquote><p><img src="https://s2.loli.net/2022/05/30/4T2QDcpAKdZfbXh.png"></p><blockquote><p>DR：指定路由器，只有在多路复用的情况下使用</p><p>BDR：如果DR坏了，再次选举会出现问题，如果DR损坏，BDR会立即称为DR</p></blockquote><h2 id="ospf域逻辑指称">OSPF域（逻辑指称）</h2><ol type="1"><li>区域用32位数字标识<ol type="1"><li>可以是IP格式，也可以是一个十进制值</li><li>区域0或区域0.0.0.0</li></ol></li><li>区域0：区域编号为0的单个区域</li><li>OSPF使用二级分层模型：逻辑上必须是两层结构，而物理实现上可能有一定的差异</li><li>在多区域OSPF网络中，要求所有区域都连接到区域0（主干）</li><li>Example：Area是和端口相关（注意端口相关）</li></ol><p><img src="https://s2.loli.net/2022/05/30/ukzE2PC9QlnUHFx.png"></p><ul><li>ABR(Area Border Router)：区域边界路由器，有一定的约束（一个路由器最多不连接超过三个以上的路由器）</li><li>一个Area中不能超过<strong>50</strong>台路由器，否则会导致SPF算法产生的计算量和内存过大</li></ul><h2 id="ospf行为">OSPF行为</h2><ul><li><p>OSPF使用邻居的邻接关系(Adjacencies)来全面了解网络</p></li><li><p>OSPF操作包括五个步骤</p><ul><li>建立邻接关系</li><li>选择DT和BDR（如果需要）：多路复用的时候才需要</li><li>发现路线</li><li>发现适当的路线</li><li>维护路线信息</li></ul></li><li><p>OSPF具有七个状态，分别是</p><ul><li>init，Two-way（双向），Exstart（预先启动），Exchange，Loading，Full</li></ul><p><img src="https://s2.loli.net/2022/05/30/DMVB2Onq39NmE5w.jpg"></p></li></ul><p><img src="https://s2.loli.net/2022/05/30/t5mZPDJe4N7QqIX.jpg"></p><h2 id="最短路径算法">最短路径算法</h2><ul><li><p>最短路径算法使用该节点作为起点，并以此检查它具有的相关相邻节点的信息来计算无环拓扑</p></li><li><p>SPF：有权图—&gt;树</p><p><img src="https://s2.loli.net/2022/05/30/zVk8SOW2E5bRiDa.png"></p></li><li><p>以C为根的例子：找到最短路径</p></li><li><p>部根据跳数选择，而根据最小权和来寻找</p></li></ul><h2 id="选择dr-和-bdr">选择DR 和 BDR</h2><ul><li><p>OSPF网络类型</p><ul><li>广播多路复用网络 例如 以太网</li><li>点对点网络</li><li>非广播多路复用网络（NBMA，Nonbroadcasr multi-access）</li></ul><p><img src="https://s2.loli.net/2022/05/30/ldHQWp92X8ibVCg.png"></p></li></ul><h2 id="dr-bdr">DR &amp; BDR</h2><p><img src="https://s2.loli.net/2022/05/30/FIhHREAm3sdLGbc.png"></p><ul><li>为什么要选择DR和BDR<ul><li>如果不选择DR 和 BDR会导致每一个路由器都和其他的素有路由器交流</li><li>每一个都要建立<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align:-.566ex" xmlns="http://www.w3.org/2000/svg" width="12.821ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5666.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="mo" transform="translate(1222.2,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="mo" transform="translate(1944.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(2333.4,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path></g><g data-mml-node="mo" transform="translate(3055.7,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="mn" transform="translate(3777.9,0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4277.9,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(4777.9,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(5277.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></span>个连接，对于链路的复杂比较高，有了DR只需要<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align:-.566ex" xmlns="http://www.w3.org/2000/svg" width="8.146ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3600.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(889,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1711.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2711.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(3211.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></span>个连接</li></ul></li><li>BDR是DR的备份，其他路由器之间就不用通信了</li><li>如果有DR则需要至少4条连接，DR和BDR之间必然有连接</li></ul><p><img src="https://s2.loli.net/2022/05/30/FYqUktEspBKGnlL.png"></p><blockquote><p>只有多路复用的实现需要DR 和 BDR</p></blockquote><ol type="1"><li>然后每个路由 与 DR 和 BDR 形成邻接关系</li><li>对于所有OSPF路由器，DR使用224.0.05（自己的ip）的<strong>主播地址</strong>向该网段上的所有其他路由器发送链接状态信息</li><li>为确保DR /BDR看到所有路由器在网段上发送的链接状态，使用了所有DR/BDR的多播地址224.0.06（DR/BDR之间）</li></ol><h3 id="多路复用中的-ospf">多路复用中的 OSPF</h3><ol type="1"><li><p>Giga/Fast/Ethernet, FDDI, Token Ring</p><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/25.png"></p></li><li><p>几个Area有几个DR和BDR(是在不同Area上)</p></li><li><p>DR和BDR归属于区域</p></li></ol><h2 id="ospf-报文">OSPF 报文</h2><ul><li>OSPF有五个类型的报文<ul><li><img src="https://s2.loli.net/2022/05/30/FBlSeTszaiDgC6I.png"></li><li>DBD:LSA, 发现没有发送LSR</li><li>由于传输要求比较高，所以设计了LSAck</li></ul></li></ul><h3 id="ospf-hello协议">OSPF Hello协议</h3><ul><li>路由器在接口上启动OSPF路由过程时，将发送hello数据包，并继续以固定的时间间隔（intervals）发送hello</li><li>控制（govern）OSPF hello 数据包交换的规则称为Hello 协议</li><li>Hello数据包的地址为224.0.05</li><li>默认情况下，广播多路访问 和 点对点网络 每十秒 发送一次Hello 报文</li><li>在连接到 NBMA网络的接口（例如帧中继）上，默认时间时30s</li><li>保持心跳，确定还活着， hello 几乎是空报文， 给所有跑OSPF的路由器发送</li></ul><h3 id="ospf报文头部">OSPF报文头部</h3><blockquote><p>Hello报文的Type字段设置为1</p></blockquote><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/27.png"></p><h3 id="哪个路由器-将称为dr">哪个路由器 将称为DR</h3><ul><li>优先级 + 路由器ID， 最大的为DR ， 第二大为BDR</li><li>优先级： 1-255 ， 默认值为：1</li><li>路由器ID<ol type="1"><li>环回IP地址（逻辑端口），避免端口宕机出现问题，（3中描述的问题）需要手动配置</li><li>如果没有回环IP地址，则接口IP为最高值地址（Active的端口上的IP作为参考）</li><li>若接口出现故障，则路由器必须重新建立邻接关系并重新转换（readvertising)LSA</li></ol></li></ul><h2 id="ospf操作的-完整步骤">OSPF操作的 完整步骤</h2><p><img src="https://s2.loli.net/2022/05/30/ocxWPge2RkyptlE.png"></p><ul><li>一开始的状态是Down State</li><li>然后发送Hello报文(Init State)</li><li>B收到A的报文(收到报文一定是邻居):Hello报文的TTL是1，所以不会跨路由器传播，收到即丢弃。</li><li>收到后，B也会发送自己的Hello，然后A收到后进入Two Way状态</li></ul><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/30.png"></p><ul><li>准备交换数据库(Exstart Starts)</li><li>首先确认主方(发送方)、从方(接受方)，保证数据有序，简单就是谁的Router ID高</li><li>Router ID高的(主方)发送自己DBD报文，从方对主方发送的DBD接受处理并发送</li></ul><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/31.png"></p><ul><li>交换完成后，各自检查自己是不是有全部的信息<ul><li>如果有完整的信息，则发送LSAck</li><li>如果发现有没有的，则发送LSR，等待LSU(整个链路的详细信息，不是LSA)来进行学习，之后收到完成后发送LSAck</li></ul></li></ul><h2 id="reviewospf-operation">Review：OSPF Operation</h2><ol type="1"><li>Set up the adjacency relationships</li><li>Elect DR and BDR (if needed)</li><li>Discover the routes</li><li>Choose appropriate routes</li><li>Maintain the route information</li></ol><h3 id="步骤1建立路由器邻接">步骤1：建立路由器邻接</h3><ol type="1"><li>路由器每隔一段时间发送一次hello数据包,Hello报文的TTL是1，表明不会跨路由传播。</li><li>如果邻居被发现了：将邻居添加到邻居数据库</li><li>发现网络类型<ol type="1"><li>如果是多路复用网络，进入DR/BDR选举过程，然后进入步骤2。</li><li>如果是点对点或点对多点网络，则不会举行DR/BDR选举过程，并跳过步骤2。</li><li>如果hello数据包标头中的DR/BDR字段已被占用(即DR / BDR对已经存在)，则不会进行DR/BDR选举，并跳过步骤2。</li></ol></li><li>如果对方的DP/BDP优于我的DP/BDP，则接受对方的。</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/28.png"></p><blockquote><p>Hello Interval:如果不同不能建立关系,Hello报文包含了DR信息在内的必要的参数</p></blockquote><h3 id="步骤2选举dr和bdr">步骤2：选举DR和BDR</h3><ol type="1"><li>如果没有其他路由器联机，则该路由器将成为DR。下一个要"启动"的路由器将是BDR。</li><li>如果多个路由器(两个或更多)同时联机，则<ol type="1"><li>优先级最高的路由器成为DR：优先级为零表示"从不DR"</li><li>如果存在平局，则具有最高路由器ID的路由器将成为DR：路由器ID是最高的环回或接口IP地址</li><li>具有第二高优先级或路由器ID的路由器成为BDR</li></ol></li><li>如果DR无效，则BDR变为DR。</li><li>然而<ol type="1"><li>如果新的OSPF路由器以更高的优先级或路由器ID加入网络，则当前的DR和BDR<strong>不会更改</strong>。</li><li>仅当当前DR失败时，它才成为新的BDR；或者仅当当前DR和BDR失败时，才成为新的DR。</li></ol></li></ol><h3 id="步骤3发现路线">步骤3：发现路线</h3><ol type="1"><li>这一步从Ex Start状态转换到完整状态</li><li>路由器确定"主/从(master/slave)"关系</li><li>多路复用网络中的DR/BDR交换LSA，并且所有其他DR将其Type 2 DBD发送给DR/BDR。</li><li>如有必要，路由器可以通过发送请求更多信息的LSR进入负载状态:所有路由器必须在"加载状态"中等待，直到完全更新请求的路由器。</li><li>路由器现在进入完整状态</li></ol><h3 id="步骤4选择适当的路线">步骤4：选择适当的路线</h3><ol type="1"><li>现在，将与网络上的所有其他路由器并行地计算SPF算法。<ol type="1"><li>切记：在发生这种情况之前，所有路由器必须具有相同的链接状态数据库。</li><li>SPF使用Cost作为指标</li><li>SPF将从其自身到目的地的每条路径的成本相加，并以路由器为根来构建树</li><li>OSPF然后在路由表中安装成本最低的路径：最多将安装4条等价路径以进行负载共享</li></ol></li></ol><h3 id="步骤5维护路由信息">步骤5:维护路由信息</h3><ol type="1"><li>常规的Hello交换是OSPF用于检测新邻居或故障(downed)邻居的机制。</li><li>根据网络的类型，Hello数据包以不同的默认间隔发送。(确定对方是不是还好)<ol type="1"><li>对于速度为T1(1.544 Mbps)或更高的链接，每10秒：广播多路访问和点对点链接</li><li>对于小于T1的链接，每30秒：非广播多路访问链接</li><li>"死间隔"是问候间隔的四倍。(如果在这样子对方还没有成功则对方死了)</li></ol></li></ol><h3 id="链路状态变化出现">2.13.6. 链路状态变化出现</h3><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/32.png"></p><ul><li>Router A tells all OSPF DRs on 224.0.0.6</li><li>Event触发交换:比如A连接的网段断掉了</li><li>A使用LSU告知<strong>DR</strong></li></ul><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/33.png"></p><ul><li>DR tells others on 224.0.0.5</li><li>DR 通过LSU告知所有的路由器</li></ul><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/34.png"></p><ul><li>如果B连接了别的Area，则继续进行交换</li></ul><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/35.png"></p><ul><li>所有的路由信息交换完毕后，同时更新路由表。</li></ul><h2 id="基本的ospf配置">基本的OSPF配置</h2><ol type="1"><li>在路由器上启动OSPF<ol type="1"><li><code>Router (config)# router ospf process-id</code></li><li>进程号:process-id<ol type="1"><li>取值: 1 ~ 65535</li><li>在一台路由器上识别多个OSPF进程</li><li>通常在整个AS(自治系统)中保持相同的进程ID</li></ol></li></ol></li><li>在路由器上识别IP网络<ol type="1"><li><code>Router (config-router) # network address wildcardmask area area-id</code></li><li>网络地址可以是整个网络，子网或接口的地址。</li><li>address:IP地址</li></ol></li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/36.png"></p><ul><li>只有一个Area，则为0</li><li><strong>Wild-card Mask和子网掩码相反</strong>:子网掩码是255.255.255.0，则Wild-card Address就是0.0.0.255</li><li>写IP和写网段最后都是一样的</li></ul><h2 id="配置回路loop地址">配置回路(Loop)地址</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Router (config) # interface loopback number </span><br><span class="line">Router (config-if) # ip address address subnet-mask</span><br></pre></td></tr></table></figure><ol type="1"><li>为OSPF路由器ID添加稳定性<ol type="1"><li>必须在OSPF进程开始之<strong>前</strong>配置回环接口:会涉及到主从关系确定和DR的选举</li><li>配置环回地址时，请使用/32掩码以避免潜在的路由问题</li><li>I建议您在基于OSPF的网络中的所有关键路由器上使用环回地址(专用或公用地址)。</li><li>一旦配置立刻生效，不需要no shutdown的命令即可</li></ol></li></ol><p><img src="https://s2.loli.net/2022/05/30/ILqn38yjAR7Xvcl.png"></p><blockquote><p>配置回路地址的方式如上图，删除只需要在前面添加no</p></blockquote><h2 id="修改ospf接口优先级">修改OSPF接口优先级</h2><ol type="1"><li>操纵DR/BDR选举<ol type="1"><li><code>Router (config-if) # ip ospf priority number</code></li><li>优先级:越大越高<ol type="1"><li>值：0-255,默认为1</li><li>优先级0表示接口不能被选为DR或BDR</li></ol></li></ol></li><li>操作OSPF的端口的优先级：<code>Router # show ip ospf [interface type number]</code></li><li>Example:</li></ol><p><a target="_blank" rel="noopener" href="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/38.png"><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/38.png" alt="img"></a></p><h2 id="ospf成本-指标">OSPF成本 = 指标</h2><ol type="1"><li>Cost适用于所有路由器连接路径</li><li>16位数字(1 – 65,535)</li><li>较低的Cost-&gt;更理想</li><li>路径决定是基于路径的总成本。</li><li>指标受到带宽的影响</li><li>用一个很大的数字去除以当前的带宽得到代价，计算方法如下</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/39.png"></p><h3 id="ospf路径cost">OSPF路径COST</h3><ol type="1"><li>连接到同一链接的所有接口必须就该链接的成本达成一致。否则，该链接将被视为关闭<ol type="1"><li>意味着可以手动调整优先级</li><li>串行链路的Cisco路由器默认成本为1784(56Kbps带宽):<code>Router (config-if) # ip ospf cost number(1-65536)</code></li><li>如果链路是更低速的，你必须为其确定真实的链路速度。</li><li>If the line is a slower speed, you must specify the real link speed: <code>Router (config-if) # bandwidth number(Kbps)</code></li></ol></li><li>例子：<ol type="1"><li>需要更改成本的常见情况是在多供应商(multi-vendor)路由环境中。成本更改将确保一个供应商的成本值与另一供应商的成本值匹配。</li><li>另一种情况是使用千兆以太网。默认成本将最低成本值1分配给100 Mbps链路。</li></ol></li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/40.png"></p><blockquote><p>现在的除数已经比这个要大了</p></blockquote><h3 id="设置ospf计时器">设置OSPF计时器</h3><ol type="1"><li>OSPF区域中的所有路由器必须在相同的hello间隔和相同的死间隔上达成一致，默认情况下：<ol type="1"><li>T1或更高链接(广播)为10秒</li><li>慢于T1的链接为30秒(非广播)</li><li>死亡间隔= 4 *问候间隔</li></ol></li><li>更改问候间隔的命令</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Router(config-if)# ip ospf hello-interval seconds</span><br><span class="line">Router(config-if)# ip ospf dead-interval seconds</span><br></pre></td></tr></table></figure><ol type="1"><li>注意：停顿间隔将自动调整为新的hello间隔的四倍。(只配置了一个的时候)</li></ol><p><img src="https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec08/41.png"></p><h1 id="参考">参考</h1><p><a target="_blank" rel="noopener" href="https://spricoder.github.io/2020/07/05/2020-Internet-computing/2020-Internet-computing-lecture08-Routing%20Protocols/">2020-计算机网络-lecture08-Routing Protocols - SpriCoder的博客</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">胡小小小小睿</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://little-hurui.cloud/2022/05/26/Routing-Protocols/">http://little-hurui.cloud/2022/05/26/Routing-Protocols/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://little-hurui.cloud" target="_blank">投降输一半</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><a class="post-meta__tags" href="/tags/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/">互联网计算</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/04/21/SfQaUZ5L1RmEr3M.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s2.loli.net/2022/04/19/RFQ7a3WzipEBlS2.jpg" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/04/19/RFQ7a3WzipEBlS2.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/04/19/faP7b2XxJlQqVrp.jpg" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/04/19/faP7b2XxJlQqVrp.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/27/Routing-and-Routers/"><img class="prev-cover" src="https://s2.loli.net/2022/04/20/vaWZgj4V8KQi56Y.jpg" onerror='onerror=null,src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Routing and Routers</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/26/%E8%B7%AF%E7%94%B1%E5%99%A8%E5%92%8C%E7%BD%91%E7%BB%9C/"><img class="next-cover" src="https://s2.loli.net/2022/04/21/wEzBjRMteC3DFGI.jpg" onerror='onerror=null,src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">路由器和网络</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/05/27/Routing-and-Routers/" title="Routing and Routers"><img class="cover" src="https://s2.loli.net/2022/04/20/vaWZgj4V8KQi56Y.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-27</div><div class="title">Routing and Routers</div></div></a></div><div><a href="/2022/05/31/%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%92%8Cvlan/" title="局域网交换和vlan"><img class="cover" src="https://s2.loli.net/2022/04/21/DCU72OZBoTvdtQm.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-31</div><div class="title">局域网交换和vlan</div></div></a></div><div><a href="/2022/05/25/%E5%BA%94%E7%94%A8%E5%B1%82/" title="应用层"><img class="cover" src="https://s2.loli.net/2022/04/22/vYHZwsUNofe3AXT.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-25</div><div class="title">应用层</div></div></a></div><div><a href="/2022/05/26/%E8%B7%AF%E7%94%B1%E5%99%A8%E5%92%8C%E7%BD%91%E7%BB%9C/" title="路由器和网络"><img class="cover" src="https://s2.loli.net/2022/04/21/wEzBjRMteC3DFGI.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-26</div><div class="title">路由器和网络</div></div></a></div><div><a href="/2022/06/01/WANS/" title="WANS"><img class="cover" src="https://s2.loli.net/2022/04/21/cTel5CKPIaRw6Fz.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-01</div><div class="title">WANS</div></div></a></div><div><a href="/2022/05/24/%E8%BF%90%E8%BE%93%E5%B1%82/" title="运输层"><img class="cover" src="https://s2.loli.net/2022/04/21/WMmplIwF7TcrVJh.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-24</div><div class="title">运输层</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/04/20/iVOmaCTznfybv2A.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="avatar"></div><div class="author-info__name">胡小小小小睿</div><div class="author-info__description">Stay hungry Stay foolish</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">148</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">88</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Freeeeeeeeedom"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Freeeeeeeeedom" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/629788196" target="_blank" title="Bilibili"><i class="fa fa-bold"></i></a><a class="social-icon" href="https://www.zhihu.com/people/over-47-40" target="_blank" title="Zhihu"><i class="fa fa-fighter-jet"></i></a><a class="social-icon" href="https://leetcode-cn.com/u/dega-vu/" target="_blank" title="Leetcode"><i class="fa fa-check-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">I'm free, gone with wind.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#routing-protocols-rip-and-ospf"><span class="toc-number">1.</span> <span class="toc-text">Routing Protocols （RIP and OSPF）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rip-v1-rip-v2"><span class="toc-number">2.</span> <span class="toc-text">RIP v1 &#x2F; RIP v2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#rip-v1"><span class="toc-number">2.1.</span> <span class="toc-text">RIP v1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rip%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">RIP配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rip-v2"><span class="toc-number">2.3.</span> <span class="toc-text">RIP v2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rip-v2%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">RIP v2的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#verifying-troubleshooting-%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4"><span class="toc-number">2.4.1.</span> <span class="toc-text">Verifying &amp;Troubleshooting 验证与故障排除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-ip-rip%E5%91%BD%E4%BB%A4"><span class="toc-number">2.4.2.</span> <span class="toc-text">debug IP RIP命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rip-v1-%E5%92%8C-rip-v2-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.5.</span> <span class="toc-text">RIP v1 和 RIP v2 的区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ospfsingle-area"><span class="toc-number">3.</span> <span class="toc-text">OSPF（single area）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">OSPF概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">3.2.</span> <span class="toc-text">路由信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf-vs-rip"><span class="toc-number">3.3.</span> <span class="toc-text">OSPF vs RIP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E7%89%B9%E5%BE%81"><span class="toc-number">3.4.</span> <span class="toc-text">OSPF特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E6%9C%AF%E8%AF%AD"><span class="toc-number">3.5.</span> <span class="toc-text">OSPF术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E5%9F%9F%E9%80%BB%E8%BE%91%E6%8C%87%E7%A7%B0"><span class="toc-number">3.6.</span> <span class="toc-text">OSPF域（逻辑指称）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E8%A1%8C%E4%B8%BA"><span class="toc-number">3.7.</span> <span class="toc-text">OSPF行为</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95"><span class="toc-number">3.8.</span> <span class="toc-text">最短路径算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9dr-%E5%92%8C-bdr"><span class="toc-number">3.9.</span> <span class="toc-text">选择DR 和 BDR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dr-bdr"><span class="toc-number">3.10.</span> <span class="toc-text">DR &amp; BDR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%AD%E7%9A%84-ospf"><span class="toc-number">3.10.1.</span> <span class="toc-text">多路复用中的 OSPF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf-%E6%8A%A5%E6%96%87"><span class="toc-number">3.11.</span> <span class="toc-text">OSPF 报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ospf-hello%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.11.1.</span> <span class="toc-text">OSPF Hello协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ospf%E6%8A%A5%E6%96%87%E5%A4%B4%E9%83%A8"><span class="toc-number">3.11.2.</span> <span class="toc-text">OSPF报文头部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%AA%E4%B8%AA%E8%B7%AF%E7%94%B1%E5%99%A8-%E5%B0%86%E7%A7%B0%E4%B8%BAdr"><span class="toc-number">3.11.3.</span> <span class="toc-text">哪个路由器 将称为DR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E6%93%8D%E4%BD%9C%E7%9A%84-%E5%AE%8C%E6%95%B4%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.12.</span> <span class="toc-text">OSPF操作的 完整步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reviewospf-operation"><span class="toc-number">3.13.</span> <span class="toc-text">Review：OSPF Operation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A41%E5%BB%BA%E7%AB%8B%E8%B7%AF%E7%94%B1%E5%99%A8%E9%82%BB%E6%8E%A5"><span class="toc-number">3.13.1.</span> <span class="toc-text">步骤1：建立路由器邻接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A42%E9%80%89%E4%B8%BEdr%E5%92%8Cbdr"><span class="toc-number">3.13.2.</span> <span class="toc-text">步骤2：选举DR和BDR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A43%E5%8F%91%E7%8E%B0%E8%B7%AF%E7%BA%BF"><span class="toc-number">3.13.3.</span> <span class="toc-text">步骤3：发现路线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A44%E9%80%89%E6%8B%A9%E9%80%82%E5%BD%93%E7%9A%84%E8%B7%AF%E7%BA%BF"><span class="toc-number">3.13.4.</span> <span class="toc-text">步骤4：选择适当的路线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A45%E7%BB%B4%E6%8A%A4%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">3.13.5.</span> <span class="toc-text">步骤5:维护路由信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8F%98%E5%8C%96%E5%87%BA%E7%8E%B0"><span class="toc-number">3.13.6.</span> <span class="toc-text">2.13.6. 链路状态变化出现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84ospf%E9%85%8D%E7%BD%AE"><span class="toc-number">3.14.</span> <span class="toc-text">基本的OSPF配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%9B%9E%E8%B7%AFloop%E5%9C%B0%E5%9D%80"><span class="toc-number">3.15.</span> <span class="toc-text">配置回路(Loop)地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9ospf%E6%8E%A5%E5%8F%A3%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">3.16.</span> <span class="toc-text">修改OSPF接口优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ospf%E6%88%90%E6%9C%AC-%E6%8C%87%E6%A0%87"><span class="toc-number">3.17.</span> <span class="toc-text">OSPF成本 &#x3D; 指标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ospf%E8%B7%AF%E5%BE%84cost"><span class="toc-number">3.17.1.</span> <span class="toc-text">OSPF路径COST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEospf%E8%AE%A1%E6%97%B6%E5%99%A8"><span class="toc-number">3.17.2.</span> <span class="toc-text">设置OSPF计时器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">4.</span> <span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/07/%E4%B9%98%E6%B3%95%E5%8E%9F%E7%90%86%E8%BF%90%E7%94%A8/" title="乘法原理运用"><img src="https://s2.loli.net/2022/05/16/bYkazKZ2OwT9yxl.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="乘法原理运用"></a><div class="content"><a class="title" href="/2022/09/07/%E4%B9%98%E6%B3%95%E5%8E%9F%E7%90%86%E8%BF%90%E7%94%A8/" title="乘法原理运用">乘法原理运用</a><time datetime="2022-09-07T07:33:03.000Z" title="发表于 2022-09-07 15:33:03">2022-09-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/06/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AF%BC%E8%AE%BA/" title="第一章-导论"><img src="https://s2.loli.net/2022/04/20/lEudvTzOcIBmCiQ.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="第一章-导论"></a><div class="content"><a class="title" href="/2022/09/06/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AF%BC%E8%AE%BA/" title="第一章-导论">第一章-导论</a><time datetime="2022-09-06T11:31:12.000Z" title="发表于 2022-09-06 19:31:12">2022-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/06/Preliminaries/" title="Preliminaries"><img src="https://s2.loli.net/2022/04/21/KB8fvb9rWXq4SUe.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="Preliminaries"></a><div class="content"><a class="title" href="/2022/09/06/Preliminaries/" title="Preliminaries">Preliminaries</a><time datetime="2022-09-06T07:25:47.000Z" title="发表于 2022-09-06 15:25:47">2022-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/06/ClassIntro/" title="ClassIntro"><img src="https://s2.loli.net/2022/04/21/xqhitE7VdkOcJ5I.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="ClassIntro"></a><div class="content"><a class="title" href="/2022/09/06/ClassIntro/" title="ClassIntro">ClassIntro</a><time datetime="2022-09-06T06:03:32.000Z" title="发表于 2022-09-06 14:03:32">2022-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/06/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" title="自动化测试"><img src="https://s2.loli.net/2022/04/21/bEV1MdFKnXm274S.jpg" onerror='this.onerror=null,this.src="https://s2.loli.net/2022/04/19/zHg7f51jDBVOcR2.jpg"' alt="自动化测试"></a><div class="content"><a class="title" href="/2022/09/06/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" title="自动化测试">自动化测试</a><time datetime="2022-09-06T03:00:41.000Z" title="发表于 2022-09-06 11:00:41">2022-09-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 胡小小小小睿</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.2},options:{renderActions:{findScript:[10,t=>{for(const a of document.querySelectorAll('script[type^="math/tex"]')){var e=!!a.type.match(/; *mode=display/);const n=new t.options.MathItem(a.textContent,t.inputJax[0],e);e=document.createTextNode("");a.parentNode.replaceChild(e,a),n.start={node:e,delim:"",n:0},n.end={node:e,delim:"",n:0},t.math.push(n)}},""],insertScript:[200,()=>{document.querySelectorAll("mjx-container:not([display])").forEach(t=>{const e=t.parentNode;("li"===e.nodeName.toLowerCase()?e.parentNode:e).classList.add("has-jax")})},"",!1]}}};const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",a.id="MathJax-script",a.async=!0,document.head.appendChild(a)}</script><script>function loadValine(){function n(){new Valine(Object.assign({el:"#vcomment",appId:"mhyGN57MG6G9YJ3rtTn90n4c-gzGzoHsz",appKey:"D3FU0mepwLhB8BK48kSAaOLx",avatar:"monsterid",serverURLs:"",emojiMaps:"",path:window.location.pathname,visitor:!0},null))}"function"==typeof Valine?n():getScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js").then(n)}function loadOtherComment(){loadValine()}setTimeout(loadValine,0)</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>